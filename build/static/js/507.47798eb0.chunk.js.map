{"version":3,"file":"static/js/507.47798eb0.chunk.js","mappings":"iNAMA,MAoNA,EApNcA,KACZ,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,CACvCC,MAAO,GACPC,SAAU,MAELC,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,KAC5BK,EAAgBC,IAAqBN,EAAAA,EAAAA,WAAS,IAC9CO,EAASC,IAAcR,EAAAA,EAAAA,WAAS,IAChCS,EAAcC,IAAmBV,EAAAA,EAAAA,WAAS,IAC3C,MAAEW,IAAUC,EAAAA,EAAAA,KACZC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OAGjBC,EAAAA,EAAAA,YAAU,KAEsB,YADf,IAAIC,gBAAgBH,EAASI,QACjCC,IAAI,aACbd,GAAkB,GAClBF,EAAS,oDAIX,MAAMiB,EAAeC,aAAaC,QAAQ,sBACtCF,GAEFG,EAAgBH,EAClB,GACC,CAACN,IAEJ,MAAOM,EAAcG,IAAmBxB,EAAAA,EAAAA,UAAS,cAE3CyB,EAAgBC,IACpB3B,GAAW4B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACR7B,GAAQ,IACX,CAAC4B,EAAEE,OAAOC,MAAOH,EAAEE,OAAOE,SAGxB3B,GAAOC,EAAS,IAChBC,GAAgBC,GAAkB,EAAM,EAqD9C,OACEyB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,UACxBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,UACxBF,EAAAA,EAAAA,KAAA,OAAKI,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAK,QAAQC,QAAQ,cAAaN,UAC/FF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,iMAGZT,EAAAA,EAAAA,KAAA,MAAAE,SAAI,aACJC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,gBAAeC,SAAA,CAAC,eAAWF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,YAAWC,SAAC,mBAEnE5B,IACC6B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sBAAqBC,SAAA,EAClCF,EAAAA,EAAAA,KAAA,OAAKI,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAK,eAAeC,QAAQ,YAAWN,UACpGF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,wRACJ,iEAKTrC,IAAUE,IACT6B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qBAAoBC,SAAA,EACjCF,EAAAA,EAAAA,KAAA,OAAKI,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAK,eAAeC,QAAQ,YAAWN,UACpGF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,6PAETrC,MAIL+B,EAAAA,EAAAA,MAAA,QAAMO,SA3ESC,UACnBhB,EAAEiB,iBACFvC,EAAS,IACTI,GAAW,GAEX,IACEoC,QAAQC,IAAI,+BAAgC/C,EAASG,OACrD,MAAM,MAAEA,EAAK,SAAEC,GAAaJ,EAE5B,IAAKG,IAAUC,EAGb,OAFAE,EAAS,6CACTI,GAAW,GAIb,MAAMsC,QAAenC,EAAMV,EAAOC,GAGlC,GAFA0C,QAAQC,IAAI,gBAAiBC,GAEzBA,EAAOC,QAAS,CAClBH,QAAQC,IAAI,8CAGZ,MAAMG,EAAqB1B,aAAaC,QAAQ,sBAChDD,aAAa2B,WAAW,sBAGpBD,GAA6C,WAAvBA,EACxBnC,EAASmC,GACqB,UAArBF,EAAOI,KAAKC,KACrBtC,EAAS,oBAETA,EAAS,aAEb,MACE+B,QAAQzC,MAAM,gBAAiB2C,EAAOM,SAEtChD,EAAS0C,EAAOM,SAAW,+CAE/B,CAAE,MAAOC,GACPT,QAAQzC,MAAM,eAAgBkD,GAC9BjD,EAAS,mEACX,CAAC,QACCI,GAAW,EACb,GAgCkCwB,UAAU,YAAWC,SAAA,EACjDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAOuB,QAAQ,QAAOrB,SAAC,mBACvBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAC9BF,EAAAA,EAAAA,KAAA,OAAKI,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAK,eAAeC,QAAQ,YAAWN,UACpGF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,0SAEVT,EAAAA,EAAAA,KAAA,SACEwB,KAAK,QACLC,GAAG,QACH3B,KAAK,QACLC,MAAOhC,EAASG,MAChBwD,SAAUhC,EACViC,UAAQ,EACRC,SAAUpD,EACVqD,YAAY,iBACZC,aAAa,QACb7B,UAAU,sBAKhBE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAOuB,QAAQ,WAAUrB,SAAC,cAC1BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2CAA0CC,SAAA,EACvDF,EAAAA,EAAAA,KAAA,OAAKI,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAK,eAAeC,QAAQ,YAAWN,UACpGF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,oIAEVT,EAAAA,EAAAA,KAAA,SACEwB,KAAM9C,EAAe,OAAS,WAC9B+C,GAAG,WACH3B,KAAK,WACLC,MAAOhC,EAASI,SAChBuD,SAAUhC,EACViC,UAAQ,EACRC,SAAUpD,EACVqD,YAAY,mDACZC,aAAa,mBACb7B,UAAU,gBAEZD,EAAAA,EAAAA,KAAA,UACEwB,KAAK,SACLvB,UAAU,sBACV8B,QA1HmBC,KAC/BrD,GAAgBsD,IAAcA,GAAU,EA0H5BC,SAAS,KAAIhC,SAEZxB,GACCyB,EAAAA,EAAAA,MAAA,OAAKC,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAK,eAAeC,QAAQ,YAAWN,SAAA,EACpGF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,2QACRT,EAAAA,EAAAA,KAAA,QAAMS,EAAE,6KACRT,EAAAA,EAAAA,KAAA,QAAMS,EAAE,qSAGVN,EAAAA,EAAAA,MAAA,OAAKC,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAK,eAAeC,QAAQ,YAAWN,SAAA,EACpGF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,2UACRT,EAAAA,EAAAA,KAAA,QAAMS,EAAE,uGAOlBN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,SAAOwB,KAAK,WAAWC,GAAG,cAC1BzB,EAAAA,EAAAA,KAAA,SAAOuB,QAAQ,WAAUrB,SAAC,oBAE5BF,EAAAA,EAAAA,KAACmC,EAAAA,GAAI,CAACC,GAAG,mBAAmBnC,UAAU,kBAAiBC,SAAC,yBAG1DF,EAAAA,EAAAA,KAAA,UACEwB,KAAK,SACLvB,UAAU,wCACV2B,SAAUpD,IAAYT,EAASG,QAAUH,EAASI,SAAS+B,SAE1D1B,GACC2B,EAAAA,EAAAA,MAAAkC,EAAAA,SAAA,CAAAnC,SAAA,EACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,YAAiB,mBAGjC,gBAIRD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,cAAaC,UAC1BC,EAAAA,EAAAA,MAAA,KAAAD,SAAA,CAAG,2BAAuBF,EAAAA,EAAAA,KAACmC,EAAAA,GAAI,CAACC,GAAG,YAAWlC,SAAC,qBAG/C,C","sources":["pages/Login.jsx"],"sourcesContent":["// src/pages/Login.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport '../styles/auth.css'; // Import the auth styles\r\n\r\nconst Login = () => {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [sessionExpired, setSessionExpired] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false); // State for password visibility\r\n  const { login } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  // Check if redirected from session expiration\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    if (params.get('session') === 'expired') {\r\n      setSessionExpired(true);\r\n      setError('Your session has expired. Please sign in again.');\r\n    }\r\n    \r\n    // Check if we have a redirect path stored\r\n    const redirectPath = localStorage.getItem('redirectAfterLogin');\r\n    if (redirectPath) {\r\n      // Store it in component state to use later after login\r\n      setRedirectPath(redirectPath);\r\n    }\r\n  }, [location]);\r\n\r\n  const [redirectPath, setRedirectPath] = useState('/dashboard');\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n    // Clear error when typing\r\n    if (error) setError('');\r\n    if (sessionExpired) setSessionExpired(false);\r\n  };\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword(prevState => !prevState);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); // Prevent default form submission\r\n    setError('');\r\n    setLoading(true);\r\n    \r\n    try {\r\n      console.log('Attempting login with email:', formData.email);\r\n      const { email, password } = formData;\r\n      \r\n      if (!email || !password) {\r\n        setError('Please enter both email and password');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const result = await login(email, password);\r\n      console.log('Login result:', result);\r\n      \r\n      if (result.success) {\r\n        console.log('Login successful, redirecting to dashboard');\r\n        \r\n        // Clear any stored redirect path\r\n        const storedRedirectPath = localStorage.getItem('redirectAfterLogin');\r\n        localStorage.removeItem('redirectAfterLogin');\r\n        \r\n        // Redirect based on user role or stored path\r\n        if (storedRedirectPath && storedRedirectPath !== '/login') {\r\n          navigate(storedRedirectPath);\r\n        } else if (result.user.role === 'admin') {\r\n          navigate('/admin/dashboard');\r\n        } else {\r\n          navigate('/dashboard');\r\n        }\r\n      } else {\r\n        console.error('Login failed:', result.message);\r\n        // Set error message properly so it displays on the form\r\n        setError(result.message || 'Invalid email or password. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Login error:', err);\r\n      setError('Login failed. Server may be unavailable. Please try again later.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"auth-container\">\r\n        <div className=\"auth-logo\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"42\" height=\"42\" fill=\"white\" viewBox=\"0 0 448 512\">\r\n            <path d=\"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z\"/>\r\n          </svg>\r\n        </div>\r\n        <h1>Sign In</h1>\r\n        <p className=\"auth-subtitle\">Welcome to <span className=\"highlight\">MediConnect</span></p>\r\n\r\n        {sessionExpired && (\r\n          <div className=\"alert alert-warning\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>\r\n            </svg>\r\n            Your session has expired. Please sign in again to continue.\r\n          </div>\r\n        )}\r\n\r\n        {error && !sessionExpired && (\r\n          <div className=\"alert alert-danger\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\r\n            </svg>\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        <form onSubmit={handleSubmit} className=\"auth-form\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\">Email Address</label>\r\n            <div className=\"input-with-icon\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.708 2.825L15 11.105V5.383zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741zM1 11.105l4.708-2.897L1 5.383v5.722z\"/>\r\n              </svg>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                required\r\n                disabled={loading}\r\n                placeholder=\"your@email.com\"\r\n                autoComplete=\"email\"\r\n                className=\"auth-input\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <div className=\"input-with-icon password-input-container\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z\"/>\r\n              </svg>\r\n              <input\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                id=\"password\"\r\n                name=\"password\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n                required\r\n                disabled={loading}\r\n                placeholder=\"••••••••\"\r\n                autoComplete=\"current-password\"\r\n                className=\"auth-input\"\r\n              />\r\n              <button \r\n                type=\"button\" \r\n                className=\"password-toggle-btn\" \r\n                onClick={togglePasswordVisibility}\r\n                tabIndex=\"-1\"\r\n              >\r\n                {showPassword ? (\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\"/>\r\n                    <path d=\"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\"/>\r\n                    <path d=\"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z\"/>\r\n                  </svg>\r\n                ) : (\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\"/>\r\n                    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"form-extras\">\r\n            <div className=\"remember-me\">\r\n              <input type=\"checkbox\" id=\"remember\" />\r\n              <label htmlFor=\"remember\">Remember me</label>\r\n            </div>\r\n            <Link to=\"/forgot-password\" className=\"forgot-password\">Forgot password?</Link>\r\n          </div>\r\n          \r\n          <button \r\n            type=\"submit\" \r\n            className=\"btn btn-primary btn-block auth-button\" \r\n            disabled={loading || !formData.email || !formData.password}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <span className=\"spinner\"></span>\r\n                Signing in...\r\n              </>\r\n            ) : 'Sign In'}\r\n          </button>\r\n        </form>\r\n        \r\n        <div className=\"auth-footer\">\r\n          <p>Don't have an account? <Link to=\"/register\">Sign Up</Link></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"names":["Login","formData","setFormData","useState","email","password","error","setError","sessionExpired","setSessionExpired","loading","setLoading","showPassword","setShowPassword","login","useAuth","navigate","useNavigate","location","useLocation","useEffect","URLSearchParams","search","get","redirectPath","localStorage","getItem","setRedirectPath","handleChange","e","_objectSpread","target","name","value","_jsx","className","children","_jsxs","xmlns","width","height","fill","viewBox","d","onSubmit","async","preventDefault","console","log","result","success","storedRedirectPath","removeItem","user","role","message","err","htmlFor","type","id","onChange","required","disabled","placeholder","autoComplete","onClick","togglePasswordVisibility","prevState","tabIndex","Link","to","_Fragment"],"sourceRoot":""}