{"version":3,"file":"static/js/958.68bb35b8.chunk.js","mappings":"wMAKA,MAmHA,EAnHuBA,KACrB,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,KAC7B,YAAEK,IAAgBC,EAAAA,EAAAA,KAgCxB,OA9BAC,EAAAA,EAAAA,YAAU,KAER,GAA0B,YAAX,OAAXF,QAAW,IAAXA,OAAW,EAAXA,EAAaG,MAGf,OAFAJ,EAAS,uDACTF,GAAW,GAISO,WACpB,IACEP,GAAW,GAEX,MAAMQ,QAAiBC,EAAAA,GAAWC,qBAE9BF,EAASG,KAAKC,QAChBf,EAAYW,EAASG,KAAKA,MAE1BT,EAAS,2BAEb,CAAE,MAAOW,GACPC,QAAQb,MAAM,2BAA4BY,GAC1CX,EAAS,oDACX,CAAC,QACCF,GAAW,EACb,GAGFe,EAAe,GACd,CAACZ,IAEAJ,GACKiB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,UAASC,SAAC,wBAG9BjB,GACKe,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,SAAEjB,KAIzCkB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAC9BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,iBACJC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mBAAkBC,SAAA,EAC/BF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,UAAc,6FAGH,IAApBtB,EAASwB,QACRD,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,KAAAE,SAAG,wBACHF,EAAAA,EAAAA,KAAA,KAAAE,SAAG,qFACHF,EAAAA,EAAAA,KAACK,EAAAA,GAAI,CAACC,GAAG,+BAA+BL,UAAU,kBAAiBC,SAAC,2CAKtEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAcC,UAC3BC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,QAAOC,SAAA,EACtBF,EAAAA,EAAAA,KAAA,SAAAE,UACEC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,UACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,YACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,SACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,kBAGRF,EAAAA,EAAAA,KAAA,SAAAE,SACGtB,EAAS2B,KAAIC,IAEZ,MAAMC,EAAMD,EAAQE,YAClBC,KAAKC,OAAO,IAAIC,KAAS,IAAIA,KAAKL,EAAQE,cAAY,UACtD,MAEF,OACEP,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAQM,QACbd,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAQO,QAAU,mBACvBf,EAAAA,EAAAA,KAAA,MAAAE,SAAKO,KACLT,EAAAA,EAAAA,KAAA,MAAAE,UACEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,KAACK,EAAAA,GAAI,CACHC,GAAE,aAAAU,OAAeR,EAAQS,KACzBhB,UAAU,yBAAwBC,SACnC,kBAGDF,EAAAA,EAAAA,KAACK,EAAAA,GAAI,CACHC,GAAE,aAAAU,OAAeR,EAAQS,IAAG,YAC5BhB,UAAU,sBAAqBC,SAChC,oBAGDF,EAAAA,EAAAA,KAACK,EAAAA,GAAI,CACHC,GAAE,aAAAU,OAAeR,EAAQS,IAAG,eAC5BhB,UAAU,yBAAwBC,SACnC,sBArBEM,EAAQS,IA0BZ,aAOb,C","sources":["pages/DoctorPatients.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { patientAPI } from '../api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst DoctorPatients = () => {\r\n  const [patients, setPatients] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    // Only doctors should access this page\r\n    if (currentUser?.role !== 'doctor') {\r\n      setError('Access denied. Only doctors can view patients.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchPatients = async () => {\r\n      try {\r\n        setLoading(true);\r\n        // Get only patients who have visited the doctor\r\n        const response = await patientAPI.getVisitedPatients();\r\n        \r\n        if (response.data.success) {\r\n          setPatients(response.data.data);\r\n        } else {\r\n          setError('Failed to fetch patients');\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching patients:', err);\r\n        setError('Failed to fetch patients. Please try again later.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPatients();\r\n  }, [currentUser]);\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading patients...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error-container\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"doctor-patients\">\r\n      <h1>My Patients</h1>\r\n      <div className=\"alert alert-info\">\r\n        <strong>Note:</strong> This list shows patients who have visited you or have confirmed appointments with you.\r\n      </div>\r\n      \r\n      {patients.length === 0 ? (\r\n        <div className=\"no-patients\">\r\n          <p>No patients found.</p>\r\n          <p>Patients appear here when they have visited you or have confirmed appointments.</p>\r\n          <Link to=\"/appointments?status=pending\" className=\"btn btn-primary\">\r\n            Check Pending Appointment Requests\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div className=\"patient-list\">\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Gender</th>\r\n                <th>Age</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {patients.map(patient => {\r\n                // Calculate age\r\n                const age = patient.dateOfBirth ? \r\n                  Math.floor((new Date() - new Date(patient.dateOfBirth)) / (365.25 * 24 * 60 * 60 * 1000)) : \r\n                  'N/A';\r\n                \r\n                return (\r\n                  <tr key={patient._id}>\r\n                    <td>{patient.name}</td>\r\n                    <td>{patient.gender || 'Not specified'}</td>\r\n                    <td>{age}</td>\r\n                    <td>\r\n                      <div className=\"action-buttons\">\r\n                        <Link \r\n                          to={`/patients/${patient._id}`} \r\n                          className=\"btn btn-primary btn-sm\"\r\n                        >\r\n                          View Details\r\n                        </Link>\r\n                        <Link \r\n                          to={`/patients/${patient._id}/records`}\r\n                          className=\"btn btn-info btn-sm\"\r\n                        >\r\n                          Health Records\r\n                        </Link>\r\n                        <Link \r\n                          to={`/patients/${patient._id}/add-record`}\r\n                          className=\"btn btn-success btn-sm\"\r\n                        >\r\n                          Add Record\r\n                        </Link>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DoctorPatients; "],"names":["DoctorPatients","patients","setPatients","useState","loading","setLoading","error","setError","currentUser","useAuth","useEffect","role","async","response","patientAPI","getVisitedPatients","data","success","err","console","fetchPatients","_jsx","className","children","_jsxs","length","Link","to","map","patient","age","dateOfBirth","Math","floor","Date","name","gender","concat","_id"],"sourceRoot":""}