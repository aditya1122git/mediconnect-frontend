"use strict";(self.webpackChunkmediconnect_frontend=self.webpackChunkmediconnect_frontend||[]).push([[507],{507:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var t=a(379),l=a(43),r=a(216),i=a(475),n=a(528),o=a(579);const c=()=>{const[e,s]=(0,l.useState)({email:"",password:""}),[a,c]=(0,l.useState)(""),[d,h]=(0,l.useState)(!1),[m,g]=(0,l.useState)(!1),[p,w]=(0,l.useState)(!1),{login:x}=(0,n.A)(),u=(0,r.Zp)(),v=(0,r.zy)();(0,l.useEffect)((()=>{"expired"===new URLSearchParams(v.search).get("session")&&(h(!0),c("Your session has expired. Please sign in again."));const e=localStorage.getItem("redirectAfterLogin");e&&b(e)}),[v]);const[j,b]=(0,l.useState)("/dashboard"),f=l=>{s((0,t.A)((0,t.A)({},e),{},{[l.target.name]:l.target.value})),a&&c(""),d&&h(!1)};return(0,o.jsx)("div",{className:"auth-page",children:(0,o.jsxs)("div",{className:"auth-container",children:[(0,o.jsx)("div",{className:"auth-logo",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42",height:"42",fill:"white",viewBox:"0 0 448 512",children:(0,o.jsx)("path",{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"})})}),(0,o.jsx)("h1",{children:"Sign In"}),(0,o.jsxs)("p",{className:"auth-subtitle",children:["Welcome to ",(0,o.jsx)("span",{className:"highlight",children:"MediConnect"})]}),d&&(0,o.jsxs)("div",{className:"alert alert-warning",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})}),"Your session has expired. Please sign in again to continue."]}),a&&!d&&(0,o.jsxs)("div",{className:"alert alert-danger",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})}),a]}),(0,o.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),c(""),g(!0);try{console.log("Attempting login with email:",e.email);const{email:s,password:a}=e;if(!s||!a)return c("Please enter both email and password"),void g(!1);const t=await x(s,a);if(console.log("Login result:",t),t.success){console.log("Login successful, redirecting to dashboard");const e=localStorage.getItem("redirectAfterLogin");localStorage.removeItem("redirectAfterLogin"),e&&"/login"!==e?u(e):"admin"===t.user.role?u("/admin/dashboard"):u("/dashboard")}else console.error("Login failed:",t.message),c(t.message||"Invalid email or password. Please try again.")}catch(a){console.error("Login error:",a),c("Login failed. Server may be unavailable. Please try again later.")}finally{g(!1)}},className:"auth-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,o.jsxs)("div",{className:"input-with-icon",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.708 2.825L15 11.105V5.383zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741zM1 11.105l4.708-2.897L1 5.383v5.722z"})}),(0,o.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:f,required:!0,disabled:m,placeholder:"your@email.com",autoComplete:"email",className:"auth-input"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"password",children:"Password"}),(0,o.jsxs)("div",{className:"input-with-icon password-input-container",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"})}),(0,o.jsx)("input",{type:p?"text":"password",id:"password",name:"password",value:e.password,onChange:f,required:!0,disabled:m,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",autoComplete:"current-password",className:"auth-input"}),(0,o.jsx)("button",{type:"button",className:"password-toggle-btn",onClick:()=>{w((e=>!e))},tabIndex:"-1",children:p?(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[(0,o.jsx)("path",{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"}),(0,o.jsx)("path",{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"}),(0,o.jsx)("path",{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"})]}):(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[(0,o.jsx)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"}),(0,o.jsx)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"})]})})]})]}),(0,o.jsxs)("div",{className:"form-extras",children:[(0,o.jsxs)("div",{className:"remember-me",children:[(0,o.jsx)("input",{type:"checkbox",id:"remember"}),(0,o.jsx)("label",{htmlFor:"remember",children:"Remember me"})]}),(0,o.jsx)(i.N_,{to:"/forgot-password",className:"forgot-password",children:"Forgot password?"})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary btn-block auth-button",disabled:m||!e.email||!e.password,children:m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"spinner"}),"Signing in..."]}):"Sign In"})]}),(0,o.jsx)("div",{className:"auth-footer",children:(0,o.jsxs)("p",{children:["Don't have an account? ",(0,o.jsx)(i.N_,{to:"/register",children:"Sign Up"})]})})]})})}}}]);
//# sourceMappingURL=507.47798eb0.chunk.js.map