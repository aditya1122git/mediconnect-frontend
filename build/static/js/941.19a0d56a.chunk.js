"use strict";(self.webpackChunkmediconnect_frontend=self.webpackChunkmediconnect_frontend||[]).push([[941],{657:(e,s,a)=>{a.d(s,{A:()=>c});a(43);var t=a(579);const n="\u2764\ufe0f",i="\ud83e\ude78",l="\u2696\ufe0f",d="\ud83d\udd2c",c=e=>{var s,a;let{summary:c,selectedEntry:r}=e;const o=r||c;if(!o||0===Object.keys(o).length)return(0,t.jsxs)("div",{className:"health-summary empty-summary animate-fade-in",children:[(0,t.jsx)("h2",{className:"med-card-title",children:"Health Summary"}),(0,t.jsx)("p",{children:"No health data recorded yet. Start by recording your health information."})]});const h=!!r;return(0,t.jsxs)("div",{className:"health-summary animate-slide-in",children:[(0,t.jsxs)("h2",{className:"med-card-title",children:[h?"Selected Health Record":"Health Summary",h&&(0,t.jsx)("span",{className:"summary-date",children:new Date(r.date).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"summary-grid animate-stagger",children:[null!==(null===(s=o.bloodPressure)||void 0===s?void 0:s.systolic)&&null!==(null===(a=o.bloodPressure)||void 0===a?void 0:a.diastolic)&&(0,t.jsxs)("div",{className:"summary-card",children:[(0,t.jsxs)("div",{className:"summary-header",children:[(0,t.jsx)("span",{className:"health-icon blood-pressure",children:i}),(0,t.jsx)("h3",{children:"Blood Pressure"})]}),(0,t.jsxs)("div",{className:"summary-value",children:[o.bloodPressure.systolic,"/",o.bloodPressure.diastolic]}),(0,t.jsx)("div",{className:"summary-detail",children:(0,t.jsx)("span",{children:h?"Exact value":"Latest reading"})})]}),null!==o.heartRate&&(0,t.jsxs)("div",{className:"summary-card",children:[(0,t.jsxs)("div",{className:"summary-header",children:[(0,t.jsx)("span",{className:"health-icon heart",children:n}),(0,t.jsx)("h3",{children:"Heart Rate"})]}),(0,t.jsxs)("div",{className:"summary-value",children:[o.heartRate," ",(0,t.jsx)("span",{children:"bpm"})]}),(0,t.jsx)("div",{className:"summary-detail",children:(0,t.jsx)("span",{children:h?"Exact value":"Latest reading"})})]}),null!==o.weight&&(0,t.jsxs)("div",{className:"summary-card",children:[(0,t.jsxs)("div",{className:"summary-header",children:[(0,t.jsx)("span",{className:"health-icon weight",children:l}),(0,t.jsx)("h3",{children:"Weight"})]}),(0,t.jsxs)("div",{className:"summary-value",children:[o.weight," ",(0,t.jsx)("span",{children:"kg"})]}),(0,t.jsx)("div",{className:"summary-detail",children:(0,t.jsx)("span",{children:h?"Exact value":"Latest reading"})})]}),null!==o.glucoseLevel&&(0,t.jsxs)("div",{className:"summary-card",children:[(0,t.jsxs)("div",{className:"summary-header",children:[(0,t.jsx)("span",{className:"health-icon glucose",children:d}),(0,t.jsx)("h3",{children:"Glucose Level"})]}),(0,t.jsxs)("div",{className:"summary-value",children:[o.glucoseLevel," ",(0,t.jsx)("span",{children:"mg/dL"})]}),(0,t.jsx)("div",{className:"summary-detail",children:(0,t.jsx)("span",{children:h?"Exact value":"Latest reading"})})]})]})]})}},941:(e,s,a)=>{a.r(s),a.d(s,{default:()=>_});var t=a(379),n=a(43),i=a(216),l=a(475),d=a(528),c=a(996),r=a(657),o=a(535),h=a(579);const m="\u2764\ufe0f",u="\ud83e\ude78",x="\u2696\ufe0f",j="\ud83d\udd2c",p="\ud83d\udcdd",N="\ud83d\udcca",v="\ud83d\udc64",y="\ud83c\udf93",g="\ud83d\udcc5",b="\ud83e\udd12",f="\ud83d\udc8a",w="\ud83d\udccb",S="\ud83d\udc69\u200d\u2695\ufe0f",_=()=>{const{currentUser:e}=(0,d.A)(),s=(0,i.Zp)(),[a,_]=(0,n.useState)({recentEntries:[],summary:{}}),[P,D]=(0,n.useState)(0),[E,A]=(0,n.useState)(0),[R,k]=(0,n.useState)(0),[q,L]=(0,n.useState)([]),[M,C]=(0,n.useState)(!0),[H,V]=(0,n.useState)(""),[U,W]=(0,n.useState)(null),[Y,z]=(0,n.useState)(null),[G,F]=(0,n.useState)(!1),$="doctor"===(null===e||void 0===e?void 0:e.role),B="admin"===(null===e||void 0===e?void 0:e.role);(0,n.useEffect)((()=>{B&&s("/admin/dashboard")}),[B,s]),(0,n.useEffect)((()=>{(async()=>{try{if(B)return void C(!1);if($){const e=await c.k2.getVisitedPatients();e.data&&e.data.success&&D(e.data.count||0);const s=await c.Es.getMyAppointments({status:"confirmed"});if(s.data&&s.data.success){const e=s.data.data;L(e),A(e.length)}const a=await c.Es.getMyAppointments({status:"pending"});a.data&&a.data.success&&k(a.data.count||0)}else{const e=await c.jz.getDashboardData();e.data&&e.data.data?_(e.data.data):(_({recentEntries:[],summary:{}}),V("Invalid data structure received from server"))}}catch(H){V($?"Failed to load doctor dashboard data":"Failed to load dashboard data"),console.error("Error fetching data:",H)}finally{C(!1)}})()}),[$,B,e,s]);const I=e=>{const s=new Date(e);return(0,o.GP)(s,"MMMM d, yyyy")},Q=e=>e?e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "):"",T=s=>!(!e||!s)&&("doctor"===e.role?s.doctor&&s.doctor._id===e.id:"patient"===e.role&&!s.doctor);return M?(0,h.jsx)("div",{className:"loading",children:"Loading dashboard data..."}):$?(0,h.jsxs)("div",{className:"dashboard animate-fade-in",children:[H&&(0,h.jsx)("div",{className:"alert alert-danger",children:H}),(0,h.jsxs)("header",{className:"dashboard-header animate-slide-in",children:[(0,h.jsxs)("h1",{children:["Welcome, Dr. ",Q(null===e||void 0===e?void 0:e.name)||"User","!"]}),(0,h.jsx)("p",{className:"subtitle",children:"Your doctor dashboard at MediConnect"})]}),(0,h.jsxs)("div",{className:"dashboard-actions animate-slide-in",children:[(0,h.jsxs)(l.N_,{to:"/patients",className:"btn btn-primary",children:[(0,h.jsx)("span",{className:"health-icon",children:v}),"View My Patients"]}),(0,h.jsxs)(l.N_,{to:"/appointments",className:"btn btn-primary",children:[(0,h.jsx)("span",{className:"health-icon",children:g}),"Manage Appointments"]}),(0,h.jsxs)(l.N_,{to:"/profile",className:"btn btn-secondary",children:[(0,h.jsx)("span",{className:"health-icon",children:y}),"Update Profile"]})]}),(0,h.jsxs)("div",{className:"upcoming-appointments",children:[(0,h.jsxs)("h2",{className:"med-card-title",children:["Upcoming Appointments",R>0&&(0,h.jsxs)("span",{className:"badge badge-warning ml-2",children:[R," pending request",1!==R?"s":""]})]}),q.length>0?(0,h.jsx)("div",{className:"appointments-list animate-stagger",children:q.map((e=>{return(0,h.jsxs)("div",{className:"med-card",children:[(0,h.jsxs)("h3",{children:[(0,h.jsx)("span",{className:"health-icon",children:g}),I(e.date)," at ",(s=e.timeSlot,s?s.replace(/([0-9]):([0-9]{2})([AP]M)/,"$1:$2 $3"):"")]}),(0,h.jsxs)("div",{className:"appointment-details",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Patient:"})," ",e.patient.name]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Reason:"})," ",e.reason]}),(0,h.jsx)("div",{className:"appointment-actions",children:(0,h.jsx)(l.N_,{to:"/appointments",className:"btn btn-sm btn-primary",children:"View Details"})})]})]},e._id);var s}))}):(0,h.jsxs)("div",{className:"empty-state animate-fade-in med-card",children:[(0,h.jsxs)("p",{children:["No upcoming appointments.",R>0?" You have ".concat(R," pending request").concat(1!==R?"s":"","."):" Check your appointment requests in the Appointment Management section."]}),(0,h.jsx)(l.N_,{to:"/appointments?status=pending",className:"btn btn-primary btn-sm",children:"View Appointment Requests"})]})]}),(0,h.jsx)("div",{className:"doctor-summary",children:(0,h.jsxs)("div",{className:"med-card",children:[(0,h.jsx)("h2",{children:"Your Practice Summary"}),(0,h.jsxs)("div",{className:"doctor-stats",children:[(0,h.jsxs)(l.N_,{to:"/patients",className:"stat-item",style:{textDecoration:"none",color:"inherit"},children:[(0,h.jsx)("span",{className:"stat-value",children:P}),(0,h.jsx)("span",{className:"stat-label",children:"Patients"}),(0,h.jsx)("small",{className:"d-block text-muted mt-1",children:"Total patients you've treated"})]}),(0,h.jsxs)("div",{className:"stat-item",children:[(0,h.jsx)("span",{className:"stat-value",children:Q((null===e||void 0===e?void 0:e.specialization)||"General")}),(0,h.jsx)("span",{className:"stat-label",children:"Specialization"})]})]}),(null===e||void 0===e||null===(O=e.qualifications)||void 0===O?void 0:O.length)>0?(0,h.jsxs)("div",{className:"qualifications-section animate-fade-in",children:[(0,h.jsx)("h3",{children:"Your Qualifications"}),(0,h.jsx)("div",{className:"qualifications-list",children:e.qualifications.map(((e,s)=>(0,h.jsxs)("div",{className:"qualification-item",children:[(0,h.jsxs)("div",{className:"qualification-degree",children:[(0,h.jsx)("span",{className:"degree-icon",children:y}),e.degree]}),(0,h.jsxs)("div",{className:"qualification-details",children:[(0,h.jsx)("span",{className:"institution",children:e.institution}),(0,h.jsx)("span",{className:"year",children:e.year})]})]},s)))})]}):(0,h.jsxs)("div",{className:"empty-qualifications animate-fade-in",children:[(0,h.jsx)("p",{children:"No qualifications added yet. Add your professional qualifications to build trust with patients."}),(0,h.jsx)(l.N_,{to:"/profile",className:"btn btn-outline-primary btn-sm",children:"Add Qualifications"})]})]})}),(0,h.jsxs)("div",{className:"recent-actions animate-stagger",children:[(0,h.jsx)("h2",{children:"What would you like to do?"}),(0,h.jsxs)("div",{className:"doctor-action-cards",children:[(0,h.jsxs)("div",{className:"med-card action-card",children:[(0,h.jsx)("h3",{children:"Patient Management"}),(0,h.jsx)("p",{children:"View and manage your patients' medical records"}),(0,h.jsx)(l.N_,{to:"/patients",className:"btn btn-outline",children:"View My Patients"})]}),(0,h.jsxs)("div",{className:"med-card action-card",children:[(0,h.jsx)("h3",{children:"Appointment Requests"}),(0,h.jsx)("p",{children:"Review and respond to new appointment requests"}),(0,h.jsx)(l.N_,{to:"/appointments?status=pending",className:"btn btn-outline",children:"View Requests"})]}),(0,h.jsxs)("div",{className:"med-card action-card",children:[(0,h.jsx)("h3",{children:"Add Health Record"}),(0,h.jsx)("p",{children:"Create a new health record for a patient"}),(0,h.jsx)(l.N_,{to:"/patients",className:"btn btn-outline",children:"Select Patient"})]})]})]})]}):(0,h.jsxs)("div",{className:"dashboard animate-fade-in",children:[H&&(0,h.jsx)("div",{className:"alert alert-danger",children:H}),Y&&(0,h.jsx)("div",{className:"modal-backdrop",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsx)("h2",{children:"Confirm Delete"}),(0,h.jsxs)("p",{children:["Are you sure you want to delete this health record from ",new Date(Y.date).toLocaleDateString(),"?"]}),(0,h.jsx)("p",{children:"This action cannot be undone."}),(0,h.jsxs)("div",{className:"modal-actions",children:[(0,h.jsx)("button",{className:"btn btn-danger",onClick:async()=>{if(Y)try{F(!0),console.log("Deleting health record with ID:",Y._id),await c.jz.deleteHealthRecord(Y._id),_((e=>(0,t.A)((0,t.A)({},e),{},{recentEntries:e.recentEntries.filter((e=>e._id!==Y._id))}))),z(null),W(null)}catch(n){var e,s,a;console.error("Error details:",(null===(e=n.response)||void 0===e?void 0:e.data)||n.message),V((null===(s=n.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to delete record")}finally{F(!1)}},disabled:G,children:G?"Deleting...":"Delete"}),(0,h.jsx)("button",{className:"btn btn-secondary",onClick:()=>{z(null)},disabled:G,children:"Cancel"})]})]})}),(0,h.jsxs)("header",{className:"dashboard-header animate-slide-in",children:[(0,h.jsxs)("h1",{children:["Welcome, ",Q(null===e||void 0===e?void 0:e.name)||"Patient","!"]}),(0,h.jsx)("p",{className:"subtitle",children:"Your health dashboard at a glance"})]}),(0,h.jsxs)("div",{className:"dashboard-actions animate-slide-in",children:[(0,h.jsxs)(l.N_,{to:"/record",className:"btn btn-primary",children:[(0,h.jsx)("span",{className:"health-icon",children:p}),"Record Health Data"]}),(0,h.jsxs)(l.N_,{to:"/history",className:"btn btn-secondary",children:[(0,h.jsx)("span",{className:"health-icon",children:N}),"View Health History"]})]}),(0,h.jsx)(r.A,{summary:a.summary,selectedEntry:U}),(0,h.jsxs)("div",{className:"recent-entries",children:[(0,h.jsx)("h2",{className:"med-card-title",children:"Recent Health Entries"}),a.recentEntries&&a.recentEntries.length>0?(0,h.jsx)("div",{className:"entries-list animate-stagger",children:a.recentEntries.map((e=>(0,h.jsxs)("div",{className:"med-card entry-card ".concat(U===e?"selected":""),onClick:()=>(e=>{U&&U._id===e._id?W(null):W(e)})(e),children:[(0,h.jsx)("h3",{children:(0,h.jsxs)("div",{className:"entry-date-section",children:[new Date(e.date).toLocaleDateString(),(0,h.jsx)("span",{className:"recorded-by",children:e.doctor?"Recorded by Dr. ".concat(e.doctor.name||"Unknown"):"Self-recorded"})]})}),(0,h.jsxs)("div",{className:"entry-details",children:[e.bloodPressure&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"health-icon blood-pressure",children:u}),"Blood Pressure: ",e.bloodPressure.systolic,"/",e.bloodPressure.diastolic]}),e.heartRate&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"health-icon heart",children:m}),"Heart Rate: ",e.heartRate," bpm"]}),e.weight&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"health-icon weight",children:x}),"Weight: ",e.weight," kg"]}),e.glucoseLevel&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"health-icon glucose",children:j}),"Glucose: ",e.glucoseLevel," mg/dL"]}),U===e&&(0,h.jsxs)("div",{className:"expanded-details",children:[e.symptoms&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"health-icon symptoms",children:b}),(0,h.jsx)("strong",{children:"Symptoms:"})," ",e.symptoms]}),e.medications&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"health-icon medications",children:f}),(0,h.jsx)("strong",{children:"Medications:"})," ",e.medications]}),e.notes&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"health-icon notes",children:w}),(0,h.jsx)("strong",{children:"Notes:"})," ",e.notes]}),(0,h.jsxs)("div",{className:"recorded-info",children:[(0,h.jsx)("span",{className:"health-icon recorded-by",children:S}),(0,h.jsx)("strong",{children:"Recorded by:"})," ",e.doctor?"Dr. ".concat(e.doctor.name):"Self"]})]}),T(e)&&(0,h.jsx)("div",{className:"delete-entry-container",children:(0,h.jsx)("button",{className:"btn btn-delete-entry",onClick:s=>((e,s)=>{e.stopPropagation(),z(s)})(s,e),children:"Delete"})})]})]},e._id)))}):(0,h.jsx)("div",{className:"empty-state animate-fade-in",children:(0,h.jsx)("p",{children:"No recent health entries. Start recording your health data today!"})})]})]});var O}}}]);
//# sourceMappingURL=941.19a0d56a.chunk.js.map