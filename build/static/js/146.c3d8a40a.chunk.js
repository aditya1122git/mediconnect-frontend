"use strict";(self.webpackChunkmediconnect_frontend=self.webpackChunkmediconnect_frontend||[]).push([[146],{146:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var l=a(43),d=a(216),r=a(475),i=a(996),n=a(528),t=a(657),c=a(579);const o="\u2764\ufe0f",h="\ud83e\ude78",m="\u2696\ufe0f",u="\ud83d\udd2c",x="\ud83e\udd12",j="\ud83d\udc8a",v="\ud83d\udccb",N=e=>e?e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "):"",p=()=>{const{patientId:e}=(0,d.g)(),s=(0,d.Zp)(),{currentUser:a}=(0,n.A)(),[p,y]=(0,l.useState)(null),[g,b]=(0,l.useState)([]),[f,k]=(0,l.useState)(!0),[w,L]=(0,l.useState)(""),[S,P]=(0,l.useState)(null),[R,C]=(0,l.useState)(null),[D,E]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if("doctor"!==(null===a||void 0===a?void 0:a.role))return L("Access denied. Only doctors can view patient records."),void k(!1);(async()=>{try{const s=await i.k2.getPatientById(e);if(!s.data.success)return L("Failed to fetch patient details"),void k(!1);y(s.data.data);const a=await i.k2.getPatientRecords(e);a.data.success?b(a.data.data):L("Failed to fetch health records")}catch(s){console.error("Error fetching data:",s),L("Failed to fetch data. Please try again later.")}finally{k(!1)}})()}),[a,e]);const _=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),H=e=>!(!a||!e)&&("doctor"===a.role&&(e.doctor&&e.doctor._id===a.id));return f?(0,c.jsx)("div",{className:"loading",children:"Loading patient records..."}):w?(0,c.jsx)("div",{className:"error-container",children:w}):(0,c.jsxs)("div",{className:"patient-records",children:[R&&(0,c.jsx)("div",{className:"modal-backdrop",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsx)("h2",{children:"Confirm Delete"}),(0,c.jsxs)("p",{children:["Are you sure you want to delete this health record from ",_(R.date),"?"]}),(0,c.jsx)("p",{children:"This action cannot be undone."}),(0,c.jsxs)("div",{className:"modal-actions",children:[(0,c.jsx)("button",{className:"btn btn-danger",onClick:async()=>{if(R)try{E(!0),console.log("Deleting health record with ID:",R._id),await i.jz.deleteHealthRecord(R._id),b((e=>e.filter((e=>e._id!==R._id)))),C(null),P(null)}catch(l){var e,s,a;console.error("Error details:",(null===(e=l.response)||void 0===e?void 0:e.data)||l.message),L((null===(s=l.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to delete record")}finally{E(!1)}},disabled:D,children:D?"Deleting...":"Delete"}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:()=>{C(null)},disabled:D,children:"Cancel"})]})]})}),(0,c.jsxs)("div",{className:"page-header",children:[(0,c.jsxs)("h1",{children:["Health Records for ",N(null===p||void 0===p?void 0:p.name)]}),(0,c.jsx)(r.N_,{to:"/patients/".concat(e,"/add-record"),className:"btn btn-primary",children:"Add New Record"})]}),(0,c.jsxs)("div",{className:"patient-info med-card",children:[(0,c.jsx)("h2",{className:"med-card-title",children:"Patient Information"}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Name:"})," ",N(null===p||void 0===p?void 0:p.name)]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Email:"})," ",null===p||void 0===p?void 0:p.email]}),(null===p||void 0===p?void 0:p.gender)&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Gender:"})," ",N(p.gender)]}),(null===p||void 0===p?void 0:p.dateOfBirth)&&(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Date of Birth:"})," ",_(p.dateOfBirth)]})]}),S&&(0,c.jsx)("div",{className:"selected-record-details",children:(0,c.jsx)(t.A,{summary:{},selectedEntry:S})}),0===g.length?(0,c.jsxs)("div",{className:"no-records med-card",children:[(0,c.jsx)("p",{children:"No health records found for this patient."}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>s("/patients/".concat(e,"/add-record")),children:"Create First Record"})]}):(0,c.jsxs)("div",{className:"recent-entries",children:[(0,c.jsx)("h2",{className:"med-card-title",children:"Health Records"}),(0,c.jsx)("div",{className:"entries-list animate-stagger",children:g.map((e=>(0,c.jsxs)("div",{className:"med-card entry-card ".concat(S===e?"selected":""),onClick:()=>(e=>{P(e===S?null:e)})(e),children:[(0,c.jsx)("h3",{children:(0,c.jsxs)("div",{className:"entry-date-section",children:[_(e.date),(0,c.jsx)("span",{className:"recorded-by",children:e.doctor?"Recorded by Dr. ".concat(N(e.doctor.name||"Unknown")):"Self-recorded"})]})}),(0,c.jsxs)("div",{className:"entry-details",children:[e.bloodPressure&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"health-icon blood-pressure",children:h}),"Blood Pressure: ",e.bloodPressure.systolic,"/",e.bloodPressure.diastolic]}),e.heartRate&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"health-icon heart",children:o}),"Heart Rate: ",e.heartRate," bpm"]}),e.weight&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"health-icon weight",children:m}),"Weight: ",e.weight," kg"]}),e.glucoseLevel&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"health-icon glucose",children:u}),"Glucose: ",e.glucoseLevel," mg/dL"]}),S===e&&(0,c.jsxs)("div",{className:"expanded-details",children:[e.symptoms&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"health-icon symptoms",children:x}),(0,c.jsx)("strong",{children:"Symptoms:"})," ",e.symptoms]}),e.medications&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"health-icon medications",children:j}),(0,c.jsx)("strong",{children:"Medications:"})," ",e.medications]}),e.notes&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"health-icon notes",children:v}),(0,c.jsx)("strong",{children:"Notes:"})," ",e.notes]})]}),H(e)&&(0,c.jsx)("div",{className:"delete-entry-container",children:(0,c.jsx)("button",{className:"btn btn-delete-entry",onClick:s=>((e,s)=>{e.stopPropagation(),C(s)})(s,e),children:"Delete"})})]})]},e._id)))})]}),(0,c.jsx)("div",{className:"back-link",children:(0,c.jsx)(r.N_,{to:"/patients",children:"Back to Patients List"})})]})}},657:(e,s,a)=>{a.d(s,{A:()=>t});a(43);var l=a(579);const d="\u2764\ufe0f",r="\ud83e\ude78",i="\u2696\ufe0f",n="\ud83d\udd2c",t=e=>{var s,a;let{summary:t,selectedEntry:c}=e;const o=c||t;if(!o||0===Object.keys(o).length)return(0,l.jsxs)("div",{className:"health-summary empty-summary animate-fade-in",children:[(0,l.jsx)("h2",{className:"med-card-title",children:"Health Summary"}),(0,l.jsx)("p",{children:"No health data recorded yet. Start by recording your health information."})]});const h=!!c;return(0,l.jsxs)("div",{className:"health-summary animate-slide-in",children:[(0,l.jsxs)("h2",{className:"med-card-title",children:[h?"Selected Health Record":"Health Summary",h&&(0,l.jsx)("span",{className:"summary-date",children:new Date(c.date).toLocaleDateString()})]}),(0,l.jsxs)("div",{className:"summary-grid animate-stagger",children:[null!==(null===(s=o.bloodPressure)||void 0===s?void 0:s.systolic)&&null!==(null===(a=o.bloodPressure)||void 0===a?void 0:a.diastolic)&&(0,l.jsxs)("div",{className:"summary-card",children:[(0,l.jsxs)("div",{className:"summary-header",children:[(0,l.jsx)("span",{className:"health-icon blood-pressure",children:r}),(0,l.jsx)("h3",{children:"Blood Pressure"})]}),(0,l.jsxs)("div",{className:"summary-value",children:[o.bloodPressure.systolic,"/",o.bloodPressure.diastolic]}),(0,l.jsx)("div",{className:"summary-detail",children:(0,l.jsx)("span",{children:h?"Exact value":"Latest reading"})})]}),null!==o.heartRate&&(0,l.jsxs)("div",{className:"summary-card",children:[(0,l.jsxs)("div",{className:"summary-header",children:[(0,l.jsx)("span",{className:"health-icon heart",children:d}),(0,l.jsx)("h3",{children:"Heart Rate"})]}),(0,l.jsxs)("div",{className:"summary-value",children:[o.heartRate," ",(0,l.jsx)("span",{children:"bpm"})]}),(0,l.jsx)("div",{className:"summary-detail",children:(0,l.jsx)("span",{children:h?"Exact value":"Latest reading"})})]}),null!==o.weight&&(0,l.jsxs)("div",{className:"summary-card",children:[(0,l.jsxs)("div",{className:"summary-header",children:[(0,l.jsx)("span",{className:"health-icon weight",children:i}),(0,l.jsx)("h3",{children:"Weight"})]}),(0,l.jsxs)("div",{className:"summary-value",children:[o.weight," ",(0,l.jsx)("span",{children:"kg"})]}),(0,l.jsx)("div",{className:"summary-detail",children:(0,l.jsx)("span",{children:h?"Exact value":"Latest reading"})})]}),null!==o.glucoseLevel&&(0,l.jsxs)("div",{className:"summary-card",children:[(0,l.jsxs)("div",{className:"summary-header",children:[(0,l.jsx)("span",{className:"health-icon glucose",children:n}),(0,l.jsx)("h3",{children:"Glucose Level"})]}),(0,l.jsxs)("div",{className:"summary-value",children:[o.glucoseLevel," ",(0,l.jsx)("span",{children:"mg/dL"})]}),(0,l.jsx)("div",{className:"summary-detail",children:(0,l.jsx)("span",{children:h?"Exact value":"Latest reading"})})]})]})]})}}}]);
//# sourceMappingURL=146.c3d8a40a.chunk.js.map