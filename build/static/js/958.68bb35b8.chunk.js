"use strict";(self.webpackChunkmediconnect_frontend=self.webpackChunkmediconnect_frontend||[]).push([[958],{958:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var n=s(43),i=s(475),a=s(996),c=s(528),d=s(579);const r=()=>{const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[o,l]=(0,n.useState)(""),{currentUser:h}=(0,c.A)();return(0,n.useEffect)((()=>{if("doctor"!==(null===h||void 0===h?void 0:h.role))return l("Access denied. Only doctors can view patients."),void r(!1);(async()=>{try{r(!0);const e=await a.k2.getVisitedPatients();e.data.success?t(e.data.data):l("Failed to fetch patients")}catch(e){console.error("Error fetching patients:",e),l("Failed to fetch patients. Please try again later.")}finally{r(!1)}})()}),[h]),s?(0,d.jsx)("div",{className:"loading",children:"Loading patients..."}):o?(0,d.jsx)("div",{className:"error-container",children:o}):(0,d.jsxs)("div",{className:"doctor-patients",children:[(0,d.jsx)("h1",{children:"My Patients"}),(0,d.jsxs)("div",{className:"alert alert-info",children:[(0,d.jsx)("strong",{children:"Note:"})," This list shows patients who have visited you or have confirmed appointments with you."]}),0===e.length?(0,d.jsxs)("div",{className:"no-patients",children:[(0,d.jsx)("p",{children:"No patients found."}),(0,d.jsx)("p",{children:"Patients appear here when they have visited you or have confirmed appointments."}),(0,d.jsx)(i.N_,{to:"/appointments?status=pending",className:"btn btn-primary",children:"Check Pending Appointment Requests"})]}):(0,d.jsx)("div",{className:"patient-list",children:(0,d.jsxs)("table",{className:"table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Name"}),(0,d.jsx)("th",{children:"Gender"}),(0,d.jsx)("th",{children:"Age"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:e.map((e=>{const t=e.dateOfBirth?Math.floor((new Date-new Date(e.dateOfBirth))/315576e5):"N/A";return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:e.gender||"Not specified"}),(0,d.jsx)("td",{children:t}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:"action-buttons",children:[(0,d.jsx)(i.N_,{to:"/patients/".concat(e._id),className:"btn btn-primary btn-sm",children:"View Details"}),(0,d.jsx)(i.N_,{to:"/patients/".concat(e._id,"/records"),className:"btn btn-info btn-sm",children:"Health Records"}),(0,d.jsx)(i.N_,{to:"/patients/".concat(e._id,"/add-record"),className:"btn btn-success btn-sm",children:"Add Record"})]})})]},e._id)}))})]})})]})}}}]);
//# sourceMappingURL=958.68bb35b8.chunk.js.map