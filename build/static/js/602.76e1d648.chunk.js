"use strict";(self.webpackChunkmediconnect_frontend=self.webpackChunkmediconnect_frontend||[]).push([[602],{602:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var t=a(379),l=a(43),o=a(216),r=a(996),n=a(528),i=a(579);const c=()=>{const{patientId:e}=(0,o.g)(),s=(0,o.Zp)(),{currentUser:a}=(0,n.A)(),[c,d]=(0,l.useState)(null),[m,u]=(0,l.useState)({date:(new Date).toISOString().slice(0,10),bloodPressure:{systolic:"",diastolic:""},heartRate:"",weight:"",glucoseLevel:"",symptoms:"",medications:"",notes:""}),[h,p]=(0,l.useState)(""),[g,v]=(0,l.useState)(!0),[x,j]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if("doctor"!==(null===a||void 0===a?void 0:a.role))return p("Access denied. Only doctors can add patient records."),void v(!1);(async()=>{try{const s=await r.k2.getPatientById(e);s.data.success?d(s.data.data):p("Failed to fetch patient details")}catch(s){console.error("Error fetching patient:",s),p("Failed to fetch patient details. Please try again later.")}finally{v(!1)}})()}),[a,e]);const f=e=>{const{name:s,value:a}=e.target;if(s.includes(".")){const[e,l]=s.split(".");u((s=>(0,t.A)((0,t.A)({},s),{},{[e]:(0,t.A)((0,t.A)({},s[e]),{},{[l]:a})})))}else u((e=>(0,t.A)((0,t.A)({},e),{},{[s]:a})))};return g?(0,i.jsx)("div",{className:"loading",children:"Loading patient data..."}):h?(0,i.jsx)("div",{className:"error-container",children:h}):(0,i.jsxs)("div",{className:"add-patient-record",children:[(0,i.jsxs)("h1",{children:["Add Health Record for ",null===c||void 0===c?void 0:c.name]}),(0,i.jsxs)("div",{className:"patient-info",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Patient:"})," ",null===c||void 0===c?void 0:c.name]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",null===c||void 0===c?void 0:c.email]}),(null===c||void 0===c?void 0:c.gender)&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Gender:"})," ",c.gender]}),(null===c||void 0===c?void 0:c.dateOfBirth)&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Date of Birth:"})," ",new Date(c.dateOfBirth).toLocaleDateString()]})]}),(0,i.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),p(""),j(!0);try{const a=(0,t.A)((0,t.A)({},m),{},{bloodPressure:{systolic:m.bloodPressure.systolic?parseInt(m.bloodPressure.systolic):null,diastolic:m.bloodPressure.diastolic?parseInt(m.bloodPressure.diastolic):null},heartRate:m.heartRate?parseInt(m.heartRate):null,weight:m.weight?parseFloat(m.weight):null,glucoseLevel:m.glucoseLevel?parseInt(m.glucoseLevel):null}),l=await r.k2.createPatientRecord(e,a);l.data.success?s("/patients/".concat(e,"/records")):p(l.data.error||"Failed to create record")}catch(n){var l,o;console.error("Error creating health record:",n),p((null===(l=n.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.error)||"Failed to create health record. Please try again.")}finally{j(!1)}},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"date",children:"Date"}),(0,i.jsx)("input",{type:"date",id:"date",name:"date",className:"form-control",value:m.date,onChange:f,required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Blood Pressure (mmHg)"}),(0,i.jsxs)("div",{className:"blood-pressure-inputs",children:[(0,i.jsx)("input",{type:"number",name:"bloodPressure.systolic",placeholder:"Systolic",className:"form-control",value:m.bloodPressure.systolic,onChange:f,min:"60",max:"250"}),(0,i.jsx)("span",{children:"/"}),(0,i.jsx)("input",{type:"number",name:"bloodPressure.diastolic",placeholder:"Diastolic",className:"form-control",value:m.bloodPressure.diastolic,onChange:f,min:"40",max:"150"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"heartRate",children:"Heart Rate (bpm)"}),(0,i.jsx)("input",{type:"number",id:"heartRate",name:"heartRate",className:"form-control",value:m.heartRate,onChange:f,min:"30",max:"220"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"weight",children:"Weight (kg)"}),(0,i.jsx)("input",{type:"number",id:"weight",name:"weight",step:"0.1",className:"form-control",value:m.weight,onChange:f,min:"20",max:"500"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"glucoseLevel",children:"Glucose Level (mg/dL)"}),(0,i.jsx)("input",{type:"number",id:"glucoseLevel",name:"glucoseLevel",className:"form-control",value:m.glucoseLevel,onChange:f,min:"20",max:"600"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"symptoms",children:"Symptoms"}),(0,i.jsx)("textarea",{id:"symptoms",name:"symptoms",className:"form-control",value:m.symptoms,onChange:f,rows:"3"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"medications",children:"Medications"}),(0,i.jsx)("textarea",{id:"medications",name:"medications",className:"form-control",value:m.medications,onChange:f,rows:"3"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"notes",children:"Additional Notes"}),(0,i.jsx)("textarea",{id:"notes",name:"notes",className:"form-control",value:m.notes,onChange:f,rows:"3"})]}),(0,i.jsxs)("div",{className:"form-actions",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>s("/patients/".concat(e)),children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:x,children:x?"Saving...":"Save Health Record"})]})]})]})}}}]);
//# sourceMappingURL=602.76e1d648.chunk.js.map